<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Récré Magic - Familles & Fans</title>
    <link rel="icon" type="image/png" href="images/favicon.png">
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600;700&family=Quicksand:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        html, body {
            width: 100%;
            height: 100%;
            font-family: 'Quicksand', sans-serif;
            background: #1a1a1a;
        }
        
        /* ========== DESKTOP VERSION ========== */
        .desktop-view {
            display: block;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }
        
        .caravane-wrapper {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #2d1b1b 0%, #1a1a1a 100%);
        }
        
        .caravane-container {
            position: relative;
            width: 90%;
            max-width: 1800px;
            margin: 0 auto;
        }
        
        .caravane-image {
            width: 100%;
            height: auto;
            display: block;
            border-radius: 10px;
            box-shadow: 0 20px 80px rgba(0, 0, 0, 0.8);
            transition: opacity 0.05s ease;
        }
        
        .hotspots-svg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }
        
        .hotspot {
            cursor: pointer;
            pointer-events: all;
            fill: transparent;
        }
        
        /* Back button */
        .back-link {
            position: fixed;
            top: 2rem;
            left: 2rem;
            background: rgba(255, 255, 255, 0.95);
            color: #2C1810;
            padding: 0.8rem 1.5rem;
            border-radius: 30px;
            text-decoration: none;
            font-weight: 700;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.5);
            transition: all 0.3s;
            z-index: 1000;
        }
        
        .back-link:hover {
            background: #FFB300;
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(0, 0, 0, 0.6);
        }
        
        .logo-header {
            position: fixed;
            top: 2rem;
            left: 50%;
            transform: translateX(-50%);
            max-width: 120px;
            filter: drop-shadow(0 10px 30px rgba(0, 0, 0, 0.8));
            animation: logoFloat 4s ease-in-out infinite;
            z-index: 1000;
        }
        
        @keyframes logoFloat {
            0%, 100% { transform: translateX(-50%) translateY(0); }
            50% { transform: translateX(-50%) translateY(-10px); }
        }
        
        .instruction {
            position: fixed;
            bottom: 2rem;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 255, 255, 0.95);
            color: #2C1810;
            padding: 1rem 2.5rem;
            border-radius: 50px;
            font-weight: 700;
            font-size: 1rem;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.5);
            animation: pulse 2s ease-in-out infinite;
            z-index: 1000;
        }
        
        @keyframes pulse {
            0%, 100% { transform: translateX(-50%) scale(1); }
            50% { transform: translateX(-50%) scale(1.05); }
        }
        
        /* ========== MOBILE VERSION ========== */
        .mobile-view {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow-y: scroll;
            overflow-x: hidden;
            scroll-snap-type: y mandatory;
            background: #1a1a1a;
            -webkit-overflow-scrolling: touch;
        }
        
        .mobile-slide {
            position: relative;
            width: 100%;
            height: 100vh;
            scroll-snap-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0;
            margin: 0;
        }
        
        .mobile-slide a {
            display: block;
        }
        
        .mobile-slide-image {
            width: 80vw;
            height: auto;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.6);
        }
        
        .mobile-slide-info {
            display: none;
        }
        
        .mobile-slide-btn {
            display: none;
        }
        
        .mobile-scroll-hint {
            display: none;
        }
        
        .mobile-nav-dots {
            position: fixed;
            right: 1rem;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            z-index: 100;
        }
        
        .nav-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transition: all 0.3s;
        }
        
        .nav-dot.active {
            background: #FFB300;
            width: 12px;
            height: 12px;
        }
        
        /* ========== RESPONSIVE ========== */
        @media (max-width: 968px) {
            .desktop-view { display: none; }
            .mobile-view { display: block; }
        }
    </style>
</head>
<body>
    
    <!-- ========== DESKTOP VERSION ========== -->
    <div class="desktop-view">
        <a href="index.html" class="back-link">← Retour</a>
        <img src="images/logo.png" alt="Récré Magic" class="logo-header">
        <div class="instruction">✨ Survolez les personnages pour les découvrir !</div>
        
        <div class="caravane-wrapper">
            <div class="caravane-container">
                <img src="images/caravane-base.png" 
                     alt="Caravane Récré Magic" 
                     class="caravane-image" 
                     id="caravaneImg">
                
                <!-- SVG avec TES zones exactes -->
                <svg class="hotspots-svg" viewBox="0 0 2000 660" preserveAspectRatio="xMidYMid meet">
                    
                    <!-- Zone 1: TOTO -->
                    <a href="nos-stars.html" 
                       onmouseover="changeImage('caravane-toto.png')" 
                       onmouseout="changeImage('caravane-base.png')">
                        <rect x="250" y="140" width="180" height="380" class="hotspot" />
                    </a>
                    
                    <!-- Zone 2: RIDEAU ROUGE -->
                    <a href="nos-spectacles-familles.html"
                       onmouseover="changeImage('caravane-rideau.png')" 
                       onmouseout="changeImage('caravane-base.png')">
                        <rect x="535" y="275" width="410" height="200" class="hotspot" />
                    </a>
                    
                    <!-- Zone 3: FLO -->
                    <a href="nos-stars.html"
                       onmouseover="changeImage('caravane-flo.png')" 
                       onmouseout="changeImage('caravane-base.png')">
                        <rect x="1000" y="180" width="200" height="400" class="hotspot" />
                    </a>
                    
                    <!-- Zone 4: RIDEAU OR -->
                    <a href="nos-expos-familles.html"
                       onmouseover="changeImage('caravane-rideau-or.png')" 
                       onmouseout="changeImage('caravane-base.png')">
                        <rect x="1240" y="140" width="190" height="400" class="hotspot" />
                    </a>
                    
                    <!-- Zone 5: CALENDRIER 2026 -->
                    <a href="calendrier.html"
                       onmouseover="changeImage('caravane-calendrier.png')" 
                       onmouseout="changeImage('caravane-base.png')">
                        <rect x="1610" y="210" width="120" height="100" class="hotspot" />
                    </a>
                    
                    <!-- Zone 6: BAPTISTE -->
                    <a href="nos-stars.html"
                       onmouseover="changeImage('caravane-baptiste.png')" 
                       onmouseout="changeImage('caravane-base.png')">
                        <rect x="1600" y="360" width="150" height="220" class="hotspot" />
                    </a>
                    
                    <!-- Zone 7: GUS -->
                    <a href="nos-stars.html"
                       onmouseover="changeImage('caravane-gus.png')" 
                       onmouseout="changeImage('caravane-base.png')">
                        <rect x="1800" y="260" width="200" height="420" class="hotspot" />
                    </a>

                    <!-- Zone 8: COOKIE -->
                    <a href="nos-stars.html"
                       onmouseover="changeImage('caravane-cookie.png')" 
                       onmouseout="changeImage('caravane-base.png')">
                        <rect x="515" y="480" width="100" height="100" class="hotspot" />
                    </a>
                    
                </svg>
            </div>
        </div>
    </div>
    
    <!-- ========== MOBILE VERSION ========== -->
    <div class="mobile-view" id="mobileView">
        <a href="index.html" class="back-link">← Retour</a>
        <img src="images/logo.png" alt="Récré Magic" class="logo-header">
        
        <div class="mobile-nav-dots" id="navDots"></div>
        
        <!-- Slide 1: TOTO -->
        <div class="mobile-slide" data-character="toto">
            <a href="nos-stars.html">
                <img src="images/toto-neutre.png" class="mobile-slide-image" data-animated="images/toto-anime.png">
            </a>
        </div>

        <!-- Slide 8: COOKIE -->
        <div class="mobile-slide" data-character="cookie">
            <a href="nos-stars.html">
                <img src="images/cookie-neutre.png" class="mobile-slide-image" data-animated="images/cookie-anime.png">
            </a>
        </div>
        
        <!-- Slide 2: RIDEAU ROUGE -->
        <div class="mobile-slide" data-character="rideau">
            <a href="nos-spectacles-familles.html">
                <img src="images/rideau-neutre.jpg" class="mobile-slide-image" data-animated="images/rideau-anime.jpg">
            </a>
        </div>
        
        <!-- Slide 3: FLO -->
        <div class="mobile-slide" data-character="flo">
            <a href="nos-stars.html">
                <img src="images/flo-neutre.jpg" class="mobile-slide-image" data-animated="images/flo-anime.jpg">
            </a>
        </div>
        
        <!-- Slide 4: RIDEAU OR -->
        <div class="mobile-slide" data-character="rideau-or">
            <a href="nos-expos-familles.html">
                <img src="images/rideau-or-neutre.jpg" class="mobile-slide-image" data-animated="images/rideau-or-anime.jpg">
            </a>
        </div>
        
        <!-- Slide 5: CALENDRIER -->
        <div class="mobile-slide" data-character="calendrier">
            <a href="calendrier.html">
                <img src="images/calendrier-neutre.jpg" class="mobile-slide-image" data-animated="images/calendrier-anime.jpg">
            </a>
        </div>
        
        <!-- Slide 6: BAPTISTE -->
        <div class="mobile-slide" data-character="baptiste">
            <a href="nos-stars.html">
                <img src="images/baptiste-neutre.jpg" class="mobile-slide-image" data-animated="images/baptiste-anime.jpg">
            </a>
        </div>
        
        <!-- Slide 7: GUS -->
        <div class="mobile-slide" data-character="gus">
            <a href="nos-stars.html">
                <img src="images/gus-neutre.jpg" class="mobile-slide-image" data-animated="images/gus-anime.jpg">
            </a>
        </div>
    </div>
    
    <script>
        // ========== DESKTOP: Image switching ==========
        function changeImage(imageName) {
            const img = document.getElementById('caravaneImg');
            if (img) img.src = 'images/' + imageName;
        }
        
        // Preload desktop images
        window.addEventListener('load', () => {
            const imagesToPreload = [
                'caravane-base.png',
                'caravane-toto.png',
                'caravane-rideau.png',
                'caravane-flo.png',
                'caravane-rideau-or.png',
                'caravane-calendrier.png',
                'caravane-baptiste.png',
                'caravane-gus.png',
                'caravane-cookie.png'
            ];
            
            imagesToPreload.forEach(src => {
                const img = new Image();
                img.src = 'images/' + src;
            });
        });
        
        // ========== MOBILE: Simple scroll detection ==========
        if (window.innerWidth <= 968) {
            const slides = document.querySelectorAll('.mobile-slide');
            const navDotsContainer = document.getElementById('navDots');
            
            // Create navigation dots
            slides.forEach((slide, index) => {
                const dot = document.createElement('div');
                dot.classList.add('nav-dot');
                navDotsContainer.appendChild(dot);
            });
            
            const dots = document.querySelectorAll('.nav-dot');
            let currentSlide = -1;
            
            // Check quelle slide est au centre
            function checkCenteredSlide() {
                const viewportCenter = window.innerHeight / 2 + window.scrollY;
                
                slides.forEach((slide, index) => {
                    const rect = slide.getBoundingClientRect();
                    const slideCenter = rect.top + window.scrollY + rect.height / 2;
                    const distance = Math.abs(viewportCenter - slideCenter);
                    
                    const img = slide.querySelector('.mobile-slide-image');
                    const animatedSrc = img.getAttribute('data-animated');
                    const neutralSrc = animatedSrc.replace('-anime.jpg', '-neutre.jpg');
                    
                    // Si cette slide est au centre (distance < 200px)
                    if (distance < 200) {
                        if (currentSlide !== index) {
                            currentSlide = index;
                            img.src = animatedSrc;
                            dots.forEach((dot, i) => dot.classList.toggle('active', i === index));
                        }
                    } else {
                        img.src = neutralSrc;
                    }
                });
            }
            
            // Check au scroll
            let scrollTimeout;
            window.addEventListener('scroll', () => {
                clearTimeout(scrollTimeout);
                scrollTimeout = setTimeout(checkCenteredSlide, 50);
            });
            
            // Check au chargement
            checkCenteredSlide();
        }
    </script>
</body>
</html>