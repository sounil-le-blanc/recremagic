<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Récré Magic - Familles & Fans</title>
    <link rel="icon" type="image/png" href="images/favicon.png">
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600;700&family=Quicksand:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        html, body {
            width: 100%;
            height: 100%;
            overflow: hidden;
            font-family: 'Quicksand', sans-serif;
            background: #1a1a1a;
        }
        
        /* ========== DESKTOP VERSION ========== */
        .desktop-view {
            display: block;
        }
        
        .caravane-wrapper {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #2d1b1b 0%, #1a1a1a 100%);
        }
        
        .caravane-container {
            position: relative;
            width: 90%;
            max-width: 1800px;
            margin: 0 auto;
        }
        
        .caravane-image {
            width: 100%;
            height: auto;
            display: block;
            border-radius: 10px;
            box-shadow: 0 20px 80px rgba(0, 0, 0, 0.8);
            transition: opacity 0.05s ease;
        }
        
        .hotspots-svg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }
        
        .hotspot {
            cursor: pointer;
            pointer-events: all;
            fill: transparent;
        }
        
        /* Back button */
        .back-link {
            position: fixed;
            top: 2rem;
            left: 2rem;
            background: rgba(255, 255, 255, 0.95);
            color: #2C1810;
            padding: 0.8rem 1.5rem;
            border-radius: 30px;
            text-decoration: none;
            font-weight: 700;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.5);
            transition: all 0.3s;
            z-index: 1000;
        }
        
        .back-link:hover {
            background: #FFB300;
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(0, 0, 0, 0.6);
        }
        
        .logo-header {
            position: fixed;
            top: 2rem;
            left: 50%;
            transform: translateX(-50%);
            max-width: 120px;
            filter: drop-shadow(0 10px 30px rgba(0, 0, 0, 0.8));
            animation: logoFloat 4s ease-in-out infinite;
            z-index: 1000;
        }
        
        @keyframes logoFloat {
            0%, 100% { transform: translateX(-50%) translateY(0); }
            50% { transform: translateX(-50%) translateY(-10px); }
        }
        
        .instruction {
            position: fixed;
            bottom: 2rem;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 255, 255, 0.95);
            color: #2C1810;
            padding: 1rem 2.5rem;
            border-radius: 50px;
            font-weight: 700;
            font-size: 1rem;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.5);
            animation: pulse 2s ease-in-out infinite;
            z-index: 1000;
        }
        
        @keyframes pulse {
            0%, 100% { transform: translateX(-50%) scale(1); }
            50% { transform: translateX(-50%) scale(1.05); }
        }
        
        /* ========== MOBILE VERSION ========== */
        .mobile-view {
            display: none;
        }
        
        .mobile-caravane-wrapper {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow-x: scroll;
            overflow-y: hidden;
            background: #1a1a1a;
            -webkit-overflow-scrolling: touch;
        }
        
        .mobile-caravane-container {
            height: 100%;
            display: flex;
            align-items: center;
            padding: 0 50vw;
        }
        
        .mobile-caravane-image {
            height: 60vh;
            width: auto;
            display: block;
            border-radius: 10px;
            box-shadow: 0 20px 80px rgba(0, 0, 0, 0.8);
        }
        
        /* ========== RESPONSIVE ========== */
        @media (max-width: 968px) {
            .desktop-view { display: none; }
            .mobile-view { display: block; }
            .logo-header { max-width: 80px; top: 1rem; }
            .back-link { top: 1rem; left: 1rem; padding: 0.6rem 1rem; font-size: 0.85rem; }
            .instruction { display: none; }
        }
    </style>
</head>
<body>
    
    <!-- ========== DESKTOP VERSION ========== -->
    <div class="desktop-view">
        <a href="index.html" class="back-link">← Retour</a>
        <img src="images/logo.png" alt="Récré Magic" class="logo-header">
        <div class="instruction">✨ Survolez les personnages pour les découvrir !</div>
        
        <div class="caravane-wrapper">
            <div class="caravane-container">
                <img src="images/caravane-base.png" 
                     alt="Caravane Récré Magic" 
                     class="caravane-image" 
                     id="caravaneImg">
                
                <svg class="hotspots-svg" viewBox="0 0 2000 660" preserveAspectRatio="xMidYMid meet">
                    
                    <!-- Zone 1: TOTO -->
                    <a href="nos-stars.html" 
                       onmouseover="changeImage('caravane-toto.png')" 
                       onmouseout="changeImage('caravane-base.png')">
                        <rect x="250" y="140" width="180" height="380" class="hotspot" />
                    </a>
                    
                    <!-- Zone 2: RIDEAU ROUGE -->
                    <a href="nos-spectacles-familles.html"
                       onmouseover="changeImage('caravane-rideau.png')" 
                       onmouseout="changeImage('caravane-base.png')">
                        <rect x="535" y="275" width="410" height="200" class="hotspot" />
                    </a>
                    
                    <!-- Zone 3: FLO -->
                    <a href="nos-stars.html"
                       onmouseover="changeImage('caravane-flo.png')" 
                       onmouseout="changeImage('caravane-base.png')">
                        <rect x="1000" y="180" width="200" height="400" class="hotspot" />
                    </a>
                    
                    <!-- Zone 4: RIDEAU OR -->
                    <a href="nos-expos-familles.html"
                       onmouseover="changeImage('caravane-rideau-or.png')" 
                       onmouseout="changeImage('caravane-base.png')">
                        <rect x="1240" y="140" width="190" height="400" class="hotspot" />
                    </a>
                    
                    <!-- Zone 5: CALENDRIER 2026 -->
                    <a href="calendrier.html"
                       onmouseover="changeImage('caravane-calendrier.png')" 
                       onmouseout="changeImage('caravane-base.png')">
                        <rect x="1610" y="210" width="120" height="100" class="hotspot" />
                    </a>
                    
                    <!-- Zone 6: BAPTISTE -->
                    <a href="nos-stars.html"
                       onmouseover="changeImage('caravane-baptiste.png')" 
                       onmouseout="changeImage('caravane-base.png')">
                        <rect x="1600" y="360" width="150" height="220" class="hotspot" />
                    </a>
                    
                    <!-- Zone 7: GUS -->
                    <a href="nos-stars.html"
                       onmouseover="changeImage('caravane-gus.png')" 
                       onmouseout="changeImage('caravane-base.png')">
                        <rect x="1800" y="260" width="200" height="420" class="hotspot" />
                    </a>

                    <!-- Zone 8: COOKIE -->
                    <a href="nos-stars.html"
                       onmouseover="changeImage('caravane-cookie.png')" 
                       onmouseout="changeImage('caravane-base.png')">
                        <rect x="515" y="480" width="100" height="100" class="hotspot" />
                    </a>
                    
                </svg>
            </div>
        </div>
    </div>
    
    <!-- ========== MOBILE VERSION ========== -->
    <div class="mobile-view">
        <a href="index.html" class="back-link">← Retour</a>
        <img src="images/logo.png" alt="Récré Magic" class="logo-header">
        
        <div class="mobile-caravane-wrapper" id="mobileWrapper">
            <div class="mobile-caravane-container">
                <img src="images/caravane-base.png" 
                     alt="Caravane Récré Magic" 
                     class="mobile-caravane-image" 
                     id="mobileCaravaneImg">
            </div>
        </div>
    </div>
    
    <script>
        // ========== DESKTOP: Image switching ==========
        function changeImage(imageName) {
            const img = document.getElementById('caravaneImg');
            if (img) {
                img.src = 'images/' + imageName;
            }
        }
        
        // Preload desktop images
        window.addEventListener('load', () => {
            const imagesToPreload = [
                'caravane-base.png',
                'caravane-toto.png',
                'caravane-rideau.png',
                'caravane-flo.png',
                'caravane-rideau-or.png',
                'caravane-calendrier.png',
                'caravane-baptiste.png',
                'caravane-gus.png',
                'caravane-cookie.png'
            ];
            
            imagesToPreload.forEach(src => {
                const img = new Image();
                img.src = 'images/' + src;
            });
        });
        
        // ========== MOBILE: Horizontal scroll with zone detection ==========
        if (window.innerWidth <= 968) {
            const wrapper = document.getElementById('mobileWrapper');
            const img = document.getElementById('mobileCaravaneImg');
            
            if (wrapper && img) {
                // Zones (en % de l'image, de gauche à droite)
                const zones = [
                    { name: 'toto', start: 12.5, end: 21.5, image: 'caravane-toto.png' },
                    { name: 'rideau', start: 26.75, end: 47.25, image: 'caravane-rideau.png' },
                    { name: 'cookie', start: 25.75, end: 30.75, image: 'caravane-cookie.png' },
                    { name: 'flo', start: 50, end: 60, image: 'caravane-flo.png' },
                    { name: 'rideau-or', start: 62, end: 71.5, image: 'caravane-rideau-or.png' },
                    { name: 'baptiste', start: 80, end: 87.5, image: 'caravane-baptiste.png' },
                    { name: 'calendrier', start: 80.5, end: 86.5, image: 'caravane-calendrier.png' },
                    { name: 'gus', start: 90, end: 100, image: 'caravane-gus.png' }
                ];
                
                let currentZone = null;
                
                function checkZone() {
                    const imgRect = img.getBoundingClientRect();
                    const imgWidth = imgRect.width;
                    const screenCenter = window.innerWidth / 2;
                    
                    // Position du centre écran sur l'image
                    const centerOnImage = screenCenter - imgRect.left;
                    const centerPercent = (centerOnImage / imgWidth) * 100;
                    
                    // Trouver la zone au centre
                    let foundZone = null;
                    for (let zone of zones) {
                        if (centerPercent >= zone.start && centerPercent <= zone.end) {
                            foundZone = zone;
                            break;
                        }
                    }
                    
                    // Changer l'image si nécessaire
                    if (foundZone && foundZone.name !== currentZone) {
                        currentZone = foundZone.name;
                        img.src = 'images/' + foundZone.image;
                    } else if (!foundZone && currentZone !== null) {
                        currentZone = null;
                        img.src = 'images/caravane-base.png';
                    }
                }
                
                // Écouter le scroll
                let scrollTimeout;
                wrapper.addEventListener('scroll', () => {
                    clearTimeout(scrollTimeout);
                    scrollTimeout = setTimeout(checkZone, 50);
                });
                
                // Check initial
                setTimeout(checkZone, 200);
            }
        }
    </script>
</body>
</html>